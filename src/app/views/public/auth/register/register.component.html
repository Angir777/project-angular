<div class="row light-blur-bg rounded-3 p-3 pb-4">
  <div class="col-12">
    <h1 class="display-6 mt-4 mb-4 text-center">{{ 'pageTitle.register' | translate }}</h1>
  </div>
  <div class="col-12">
    <form [formGroup]="form" (ngSubmit)="register()">
      <div class="field p-fluid">
        <label for="email">{{ 'register.form.name' | translate }}*</label>
        <span class="p-input-icon-left">
          <i><fa-icon [icon]="faSignature"></fa-icon></i>
          <input
            pInputText
            pAutoFocus
            [ngClass]="getStatus('name')"
            id="name"
            type="name"
            [placeholder]="'register.form.name' | translate"
            formControlName="name"
            required
            aria-describedby="name-required"
            [attr.aria-invalid]="getAriaInvalid('name')"
            (keydown)="clearServerErrors('name')" />
        </span>
        @if (isFormControlInvalid('name')) {
          <app-form-control-errors [errors]="form.get('name')?.errors" [serverErrors]="getServerErrors('name')" />
        }
      </div>

      <div class="field p-fluid mt-3">
        <label for="email">{{ 'register.form.email' | translate }}*</label>
        <span class="p-input-icon-left">
          <i><fa-icon [icon]="faUser"></fa-icon></i>
          <input
            pInputText
            [ngClass]="getStatus('email')"
            id="email"
            type="email"
            [placeholder]="'register.form.email' | translate"
            formControlName="email"
            required
            aria-describedby="email-required"
            [attr.aria-invalid]="getAriaInvalid('email')"
            (keydown)="clearServerErrors('email')" />
        </span>
        @if (isFormControlInvalid('email')) {
          <app-form-control-errors [errors]="form.get('email')?.errors" [serverErrors]="getServerErrors('email')" />
        }
      </div>

      <div class="field p-fluid mt-3">
        <label for="password">{{ 'register.form.password' | translate }}*</label>
        <span class="p-input-icon-left">
          <i><fa-icon [icon]="faKey"></fa-icon></i>
          <input
            pInputText
            [ngClass]="getStatus('password')"
            id="password"
            type="password"
            [placeholder]="'register.form.password' | translate"
            formControlName="password"
            required
            aria-describedby="password-required"
            [attr.aria-invalid]="getAriaInvalid('password')"
            (keydown)="clearServerErrors('password')" />
        </span>
        @if (isFormControlInvalid('password')) {
          <app-form-control-errors [errors]="form.get('password')?.errors" [serverErrors]="getServerErrors('password')" />
        }
      </div>

      <div class="field p-fluid mt-3">
        <label for="password">{{ 'register.form.passwordConfirmation' | translate }}*</label>
        <span class="p-input-icon-left">
          <i><fa-icon [icon]="faKey"></fa-icon></i>
          <input
            pInputText
            [ngClass]="getStatus('passwordConfirmation')"
            id="passwordConfirmation"
            type="password"
            [placeholder]="'register.form.passwordConfirmation' | translate"
            formControlName="passwordConfirmation"
            required
            aria-describedby="passwordConfirmation-required"
            [attr.aria-invalid]="getAriaInvalid('passwordConfirmation')"
            (keydown)="clearServerErrors('passwordConfirmation')" />
        </span>
        @if (isFormControlInvalid('passwordConfirmation')) {
          <app-form-control-errors [errors]="form.get('passwordConfirmation')?.errors" [serverErrors]="getServerErrors('passwordConfirmation')" />
        }
      </div>

      <div class="mt-4">
        <div class="d-flex align-items-center">
          <p-checkbox
            id="acceptanceRegulations"
            formControlName="acceptanceRegulations"
            [binary]="true"
            [ngClass]="getStatus('acceptanceRegulations')"
            [attr.aria-invalid]="getAriaInvalid('passwordConfirmation')"
            (keydown)="clearServerErrors('passwordConfirmation')"></p-checkbox>
          <label for="acceptanceRegulations" class="ms-2">{{ 'register.form.acceptanceRegulations' | translate }}*</label>
        </div>
        @if (isFormControlInvalid('acceptanceRegulations')) {
          <app-form-control-errors [errors]="form.get('acceptanceRegulations')?.errors" [serverErrors]="getServerErrors('acceptanceRegulations')" />
        }
      </div>

      <button pButton pRipple class="p-button-success w-100 d-flex justify-content-center rounded mt-3" [disabled]="isLoading || !form.valid">
        @if (!isLoading) {
          {{ 'register.button.register' | translate }}
        }
        @if (isLoading) {
          <fa-icon [icon]="faSpinner" [animation]="isLoading ? 'spin' : undefined"></fa-icon>
        }
      </button>

      <div class="text-center">
        <a class="link-secondary link-underline-opacity-0" [routerLink]="['/login']">{{ 'register.form.login' | translate }}</a>
      </div>
    </form>
  </div>
</div>
